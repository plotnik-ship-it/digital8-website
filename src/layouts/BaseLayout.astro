---
import { ViewTransitions } from 'astro:transitions';
import MagneticButton from '../components/MagneticButton.jsx';
import '../global.css'; // Import global styles

const { 
    title = "Digital8 - Premium Web & App Development", 
    pageDescription = "We build high-performance websites and applications for ambitious brands. Combining elite engineering with stunning design to deliver digital experiences that drive results."
} = Astro.props;

// All navigation links are now in one place for consistent behavior.
const navLinks = [
    { href: "/#work", text: "Home", sectionId: "work" },
    { href: "/#about", text: "About", sectionId: "about" },
    { href: "/insights", text: "Insights", sectionId: "insights" },
    { href: "/#contact", text: "Contact", sectionId: "contact" }
];
---

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content={pageDescription} />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
        <ViewTransitions />
	</head>
	<body class="bg-brand-dark text-white font-geist">
        <header class="fixed top-0 left-0 w-full z-50">
            <div class="container mx-auto px-4 md:px-8 py-4">
                <div class="flex justify-between items-center">
                    <!-- Left: Logo -->
                    <a href="/" class="relative z-10">
                        <img src="/full-logo.png" alt="Digital8 Logo" class="h-6 md:h-7 transition-transform duration-300 hover:scale-105" />
                    </a>

                    <!-- Center: Desktop Navigation -->
                    <nav class="hidden md:flex items-center gap-1 bg-white/10 backdrop-blur-md rounded-full p-1">
                        {navLinks.map(link => (
                            <a href={link.href} class="nav-link text-white rounded-full transition-colors duration-300" data-section={link.sectionId}>
                                <MagneticButton client:load>
                                    <span class="px-4 py-2 block text-sm">{link.text}</span>
                                </MagneticButton>
                            </a>
                        ))}
                    </nav>

                    <!-- Right: Mobile Menu Toggle -->
                    <div class="md:hidden font-semibold z-10">
                        <button id="mobile-menu-toggle" type="button" aria-label="Open Menu">
                            <MagneticButton client:load>
                                <span id="mobile-menu-text" class="px-4 py-2">Menu</span>
                            </MagneticButton>
                        </button>
                    </div>
                </div>
            </div>
        </header>

		<div id="mobile-menu-overlay" class="fixed inset-0 bg-brand-dark z-40 flex flex-col items-center justify-center gap-8 text-center hidden">
            <nav class="flex flex-col gap-6">
                {navLinks.map(link => (
                    <a href={link.href} class="mobile-nav-link text-4xl clash-display">{link.text}</a>
                ))}
            </nav>
        </div>
		
		<main class="relative z-10 px-4 md:px-8 py-32 sm:py-36">
			<slot />
		</main>
	
		<footer class="text-center p-8 text-gray-500 border-t border-gray-900 mt-24">
			Â© {new Date().getFullYear()} Digital8. All Rights Reserved.
		</footer>
	
		<div class="left-curtain fixed top-0 left-0 h-screen w-1/2 bg-brand-dark z-[9999]" style="height: 100vh"></div>
        <div class="right-curtain fixed top-0 right-0 h-screen w-1/2 bg-brand-dark z-[9999]" style="height: 100vh"></div>

		<script type="module" src="/src/scripts/main.js"></script>
	</body>
</html>
